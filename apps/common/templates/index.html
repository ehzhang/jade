{% extends 'base.html' %}

{% block content %}

<script>
  
  $('.ui.modal')
  .modal()
  ;

</script>

{% load staticfiles %}

<div class="ui modal">
  <i class="close icon"></i>
  <div class="header large">
    Your Poll has been Created!
  </div>
  <div class="content">
    <h2> Visit/Share this link: <a id="poll_url" href=""></a> </h2>
  </div>
  <div class="actions">
    <div class="ui blue button use-oswald"> <i class="share icon"></i>SHARE</div>
    <div class="ui orange button use-oswald">OK</div>
  </div>
</div>

<center>
<div class="three row middle aligned column banner">
    <div class="row">
      <div class="logo-big">
        TEMPEST
        <img src="{% static 'images/logo.png' %}" class="logo-image">
      </div>
    </div>
    <div class="row logo-description">
      Organize your group's ideas, instantly.
    </div>
    <div class="middle align row">
      <div class="stackable ui grid">
        <div class="two wide column"></div>
        <div class="eight wide column">
          <div class="ui massive fluid input">
            <input type="text" placeholder="Propose a topic / Ask a Question"
            id="question">
            {% csrf_token %}
          </div>
        </div>
        <div class="four wide column center">
          <div class="ui massive orange button use-oswald" id="createpoll">Create a Poll Now</div>
        </div>
        <div class="two wide column"></div>
      </div>
    </div>
</div>

<script type="text/javascript">
    $("#createpoll").click(function(){
        var question = $('#question')[0].value;
        var csrf_token = $('[name="csrfmiddlewaretoken"]')[0].value;
        $.post(
            "{% url 'create_poll' %}",
            {
                'name': question,
                'csrfmiddlewaretoken': csrf_token
            },
            function(response){
                if (response.result == 'success'){
                    $('.create.modal').modal('show');
                    $('#poll_url')[0].setAttribute('href', response.url);
                    $('#poll_url')[0].innerHTML = response.fullurl;
                    $('.create.modal').modal('show');
                }
            }
        )
    });
</script>


<div class="box">
  <div class="two column stackable ui grid">
  <div class="column">
      <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede.</p>
      <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede.</p>
  </div>
  <div class="column">
      <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede.</p>
      <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede.</p>
  </div>
</div>

</div>
</center>

{% endblock %}

